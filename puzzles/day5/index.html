<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<script src="https://plausible.scala-lang.org/js/script.js" defer="defer" async data-domain="scalacenter.github.io"></script><title data-react-helmet="true">Day 5: Hydrothermal Venture | Scala Center Advent of Code</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://scalacenter.github.io//scala-advent-of-code/puzzles/day5"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Day 5: Hydrothermal Venture | Scala Center Advent of Code"><meta data-react-helmet="true" name="description" content="by @tgodzik"><meta data-react-helmet="true" property="og:description" content="by @tgodzik"><link data-react-helmet="true" rel="shortcut icon" href="/scala-advent-of-code/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://scalacenter.github.io//scala-advent-of-code/puzzles/day5"><link data-react-helmet="true" rel="alternate" href="https://scalacenter.github.io//scala-advent-of-code/puzzles/day5" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://scalacenter.github.io//scala-advent-of-code/puzzles/day5" hreflang="x-default"><link rel="stylesheet" href="/scala-advent-of-code/assets/css/styles.16a73e1b.css">
<link rel="preload" href="/scala-advent-of-code/assets/js/runtime~main.e379b2bd.js" as="script">
<link rel="preload" href="/scala-advent-of-code/assets/js/main.970419d4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/scala-advent-of-code/"><div class="navbar__logo"><img src="/scala-advent-of-code/img/scala-tree.png" alt="Scala Center" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/scala-advent-of-code/img/scala-tree.png" alt="Scala Center" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Scala Advent of Code</b></a><a class="navbar__item navbar__link navbar__link--active" href="/scala-advent-of-code/introduction">Introduction</a><a class="navbar__item navbar__link navbar__link--active" href="/scala-advent-of-code/setup">Setup</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Puzzles</a><ul class="dropdown__menu"><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day1">Day 1</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day2">Day 2</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day3">Day 3</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day4">Day 4</a></li><li><a aria-current="page" class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day5">Day 5</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day6">Day 6</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day7">Day 7</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day8">Day 8</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day9">Day 9</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day10">Day 10</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day11">Day 11</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day12">Day 12</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day13">Day 13</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day14">Day 14</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day15">Day 15</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/scalacenter/scala-advent-of-code" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/scala-advent-of-code/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/scala-advent-of-code/setup">Setup</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Puzzles</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day1">Day 1: Sonar Sweep</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day2">Day 2: Dive!</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day3">Day 3: Binary Diagnostic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day4">Day 4: Giant Squid</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/scala-advent-of-code/puzzles/day5">Day 5: Hydrothermal Venture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day6">Day 6: Lanternfish</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day7">Day 7: The Treachery of Whales</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day8">Day 8: Seven Segment Search</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day9">Day 9: Smoke Basin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day10">Day 10: Syntax Scoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day11">Day 11: Dumbo Octopus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day12">Day 12: Passage Pathing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day13">Day 13: Transparent Origami</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day14">Day 14: Extended Polymerization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day15">Day 15</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Day 5: Hydrothermal Venture</h1></header><p>by <a href="https://github.com/tgodzik" target="_blank" rel="noopener noreferrer">@tgodzik</a></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="puzzle-description">Puzzle description<a aria-hidden="true" class="hash-link" href="#puzzle-description" title="Direct link to heading">â€‹</a></h2><p><a href="https://adventofcode.com/2021/day/5" target="_blank" rel="noopener noreferrer">https://adventofcode.com/2021/day/5</a></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="solution-of-part-1">Solution of Part 1<a aria-hidden="true" class="hash-link" href="#solution-of-part-1" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="parsing-the-file">Parsing the file<a aria-hidden="true" class="hash-link" href="#parsing-the-file" title="Direct link to heading">â€‹</a></h3><p>The first step as usual is to model the problem and to parse the input file.</p><p>In this puzzle we are dealing with cartesian coordinates, so it would be good to
add a <code>Point</code> class for convenience.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">case class Point(x: Int, y: Int)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Beside that we will also want to model a Vent which can have starting point and
ending one:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">case class Vent(start: Point, end: Point)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Let&#x27;s try to convert the input to our domain and let&#x27;s start by reading it. I
will use an extension method on a string so that I can easily just write
<code>&quot;input1&quot;.input</code> to recive a list of Vents to analyse.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">extension (s: String)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def input: Seq[Vent] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val uri = getClass().getClassLoader().getResource(s).toURI()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val path = Paths.get(uri)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for line &lt;- Files.readAllLines(path).asScala.toSeq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yield Vent(line)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>As you can see above I actually decide to put the parsing of the lines into the
apply method of Vent, which we can implement as:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">object Vent:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def apply(str: String) =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    str.split(&quot;-&gt;&quot;) match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case Array(start, end) =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new Vent(Point(start), Point(end))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case _ =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new java.lang.IllegalArgumentException(s&quot;Wrong vent input $str&quot;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In the above code we split the line into the part before <code>-&gt;</code> and after it,
which are the start and end of the vent. I delegate the parsing of positions
further into the apply metohd of Position:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">object Point:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def apply(str: String) =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    str.split(&quot;,&quot;) match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case Array(start, end) =&gt; Point(start.trim.toInt, end.trim.toInt)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case _ =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new java.lang.IllegalArgumentException(s&quot;Wrong point input $str&quot;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>With all the above code we now have a really nicely modeled input.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="hydrothermal-venture-the-orthogonal-pleasures">Hydrothermal Venture: The Orthogonal Pleasures.<a aria-hidden="true" class="hash-link" href="#hydrothermal-venture-the-orthogonal-pleasures" title="Direct link to heading">â€‹</a></h3><p>Let&#x27;s use the input to find all the dangerous spots on the map in the first part
of the puzzle. We can use a mutable map with default values for that:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val map = mutable.Map[Point, Int]().withDefaultValue(0)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This way we can easily update all the points that have a vent defined with as
imple method:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  def update(p: Point) =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val current = map(p)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    map.update(p, current + 1)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Last thing to consider is how to actually add those points. For that we need to
define proper ranges:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">def rangex =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val stepx = if vent.end.x &gt; vent.start.x then 1 else -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vent.start.x.to(vent.end.x, stepx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def rangey =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val stepy = if vent.end.y &gt; vent.start.y then 1 else -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vent.start.y.to(vent.end.y, stepy)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We need to make sure that those range are increasing or decreasing based on the
fact that the start might be located before the end.</p><p>With those ranges defined we can just iterate and add all the points:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// vent is horizontal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if vent.start.x == vent.end.x then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for py &lt;- rangey do update(Point(vent.start.x, py))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// vent is vertical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else if vent.start.y == vent.end.y then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for px &lt;- rangex do update(Point(px, vent.start.y))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>and add the end just count them all up:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">map.count { case (_, v) =&gt; v &gt; 1 }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Altogether the solution looks like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">def findDangerousPoints(vents: Seq[Vent]) =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val map = mutable.Map[Point, Int]().withDefaultValue(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def update(p: Point) =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val current = map(p)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    map.update(p, current + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for vent &lt;- vents do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def rangex =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      val stepx = if vent.end.x &gt; vent.start.x then 1 else -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      vent.start.x.to(vent.end.x, stepx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def rangey =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      val stepy = if vent.end.y &gt; vent.start.y then 1 else -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      vent.start.y.to(vent.end.y, stepy)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // vent is horizontal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if vent.start.x == vent.end.x then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      for py &lt;- rangey do update(Point(vent.start.x, py))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // vent is vertical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else if vent.start.y == vent.end.y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      for px &lt;- rangex do update(Point(px, vent.start.y))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  map.count { case (_, v) =&gt; v &gt; 1 }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end findDangerousPoints</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="hydrothermal-venture-2-the-diagonal-menace">Hydrothermal Venture 2: The Diagonal Menace<a aria-hidden="true" class="hash-link" href="#hydrothermal-venture-2-the-diagonal-menace" title="Direct link to heading">â€‹</a></h3><p>For the second part of the puzzle we need to take into account also the diagonal
vents. Fortunately, they can only have an angle of 45 degrees, which means that
both x and y positions increment by 1 at each step of the range. So we can add
additional condition to our solution:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">else for (px, py) &lt;- rangex.zip(rangey) do update(Point(px, py))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We can just use the 2 previously defined ranges for this. So the full method
will look like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">def findDangerousPoints(vents: Seq[Vent]) =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val map = mutable.Map[Point, Int]().withDefaultValue(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def update(p: Point) =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val current = map(p)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    map.update(p, current + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for vent &lt;- vents do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def rangex =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      val stepx = if vent.end.x &gt; vent.start.x then 1 else -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      vent.start.x.to(vent.end.x, stepx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def rangey =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      val stepy = if vent.end.y &gt; vent.start.y then 1 else -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      vent.start.y.to(vent.end.y, stepy)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // vent is horizontal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if vent.start.x == vent.end.x then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      for py &lt;- rangey do update(Point(vent.start.x, py))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // vent is vertical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else if vent.start.y == vent.end.y then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      for px &lt;- rangex do update(Point(px, vent.start.y))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // vent is diagonal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else for (px, py) &lt;- rangex.zip(rangey) do update(Point(px, py))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  map.count { case (_, v) =&gt; v &gt; 1 }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end findDangerousPoints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="full-solution">Full solution<a aria-hidden="true" class="hash-link" href="#full-solution" title="Direct link to heading">â€‹</a></h3><p>Full solution can be found
<a href="https://gist.github.com/tgodzik/48b300f6719d0235f902e0d2c4853d64" target="_blank" rel="noopener noreferrer">here</a> and can
be run using latest <a href="https://scala-cli.virtuslab.org/" target="_blank" rel="noopener noreferrer">scala-cli</a>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; scala-cli https://gist.github.com/tgodzik/48b300f6719d0235f902e0d2c4853d64</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="solutions-from-the-community">Solutions from the community<a aria-hidden="true" class="hash-link" href="#solutions-from-the-community" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://github.com/tOverney/AdventOfCode2021/blob/main/src/main/scala/ch/overney/aoc/day5/" target="_blank" rel="noopener noreferrer">Solution</a> of <a href="https://github.com/tOverney" target="_blank" rel="noopener noreferrer">@tOverney</a>.</li><li><a href="https://github.com/FlorianCassayre/AdventOfCode-2021/blob/master/src/main/scala/adventofcode/solutions/Day05.scala" target="_blank" rel="noopener noreferrer">Solution</a> of <a href="https://github.com/FlorianCassayre" target="_blank" rel="noopener noreferrer">@FlorianCassayre</a>.</li><li><a href="https://github.com/Jannyboy11/AdventOfCode2021/blob/main/src/main/scala/day05/Day05.scala" target="_blank" rel="noopener noreferrer">Solution</a> of <a href="https://twitter.com/JanBoerman95" target="_blank" rel="noopener noreferrer">Jan Boerman</a>.</li></ul><p>Share your solution to the Scala community by editing this page.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/scalacenter/scala-advent-of-code/edit/website/docs/puzzles/day5.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/scala-advent-of-code/puzzles/day4"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Day 4: Giant Squid</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/scala-advent-of-code/puzzles/day6"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Day 6: Lanternfish<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#puzzle-description" class="table-of-contents__link toc-highlight">Puzzle description</a></li><li><a href="#solution-of-part-1" class="table-of-contents__link toc-highlight">Solution of Part 1</a><ul><li><a href="#parsing-the-file" class="table-of-contents__link toc-highlight">Parsing the file</a></li><li><a href="#hydrothermal-venture-the-orthogonal-pleasures" class="table-of-contents__link toc-highlight">Hydrothermal Venture: The Orthogonal Pleasures.</a></li><li><a href="#hydrothermal-venture-2-the-diagonal-menace" class="table-of-contents__link toc-highlight">Hydrothermal Venture 2: The Diagonal Menace</a></li><li><a href="#full-solution" class="table-of-contents__link toc-highlight">Full solution</a></li></ul></li><li><a href="#solutions-from-the-community" class="table-of-contents__link toc-highlight">Solutions from the community</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Content</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/scala-advent-of-code/introduction">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/scala-advent-of-code/setup">Setup</a></li><li class="footer__item"><a class="footer__link-item" href="/scala-advent-of-code/puzzles/day1">Puzzles</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/channels/632150470000902164/913451015246868530" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/scala_lang" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://scala.epfl.ch/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Scala Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/scalacenter" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Scala Center, Built with Docusaurus.</div></div></div></footer></div>
<script src="/scala-advent-of-code/assets/js/runtime~main.e379b2bd.js"></script>
<script src="/scala-advent-of-code/assets/js/main.970419d4.js"></script>
</body>
</html>