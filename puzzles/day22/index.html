<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<script src="https://plausible.scala-lang.org/js/script.js" defer="defer" async data-domain="scalacenter.github.io"></script><title data-react-helmet="true">Day 22: Reactor Reboot | Scala Center Advent of Code</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://scalacenter.github.io//scala-advent-of-code/puzzles/day22"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Day 22: Reactor Reboot | Scala Center Advent of Code"><meta data-react-helmet="true" name="description" content="by @bishabosha"><meta data-react-helmet="true" property="og:description" content="by @bishabosha"><link data-react-helmet="true" rel="shortcut icon" href="/scala-advent-of-code/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://scalacenter.github.io//scala-advent-of-code/puzzles/day22"><link data-react-helmet="true" rel="alternate" href="https://scalacenter.github.io//scala-advent-of-code/puzzles/day22" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://scalacenter.github.io//scala-advent-of-code/puzzles/day22" hreflang="x-default"><link rel="stylesheet" href="/scala-advent-of-code/assets/css/styles.16a73e1b.css">
<link rel="preload" href="/scala-advent-of-code/assets/js/runtime~main.cff3ab2b.js" as="script">
<link rel="preload" href="/scala-advent-of-code/assets/js/main.339c7521.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/scala-advent-of-code/"><div class="navbar__logo"><img src="/scala-advent-of-code/img/scala-tree.png" alt="Scala Center" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/scala-advent-of-code/img/scala-tree.png" alt="Scala Center" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Scala Advent of Code</b></a><a class="navbar__item navbar__link navbar__link--active" href="/scala-advent-of-code/introduction">Introduction</a><a class="navbar__item navbar__link navbar__link--active" href="/scala-advent-of-code/setup">Setup</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Puzzles</a><ul class="dropdown__menu"><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day1">Day 1</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day2">Day 2</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day3">Day 3</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day4">Day 4</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day5">Day 5</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day6">Day 6</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day7">Day 7</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day8">Day 8</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day9">Day 9</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day10">Day 10</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day11">Day 11</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day12">Day 12</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day13">Day 13</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day14">Day 14</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day15">Day 15</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day16">Day 16</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day17">Day 17</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day20">Day 20</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day21">Day 21</a></li><li><a aria-current="page" class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day22">Day 22</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day23">Day 23</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day24">Day 24</a></li><li><a class="dropdown__link navbar__link--active" href="/scala-advent-of-code/puzzles/day25">Day 25</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/scalacenter/scala-advent-of-code" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/scala-advent-of-code/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/scala-advent-of-code/setup">Setup</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Puzzles</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day1">Day 1: Sonar Sweep</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day2">Day 2: Dive!</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day3">Day 3: Binary Diagnostic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day4">Day 4: Giant Squid</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day5">Day 5: Hydrothermal Venture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day6">Day 6: Lanternfish</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day7">Day 7: The Treachery of Whales</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day8">Day 8: Seven Segment Search</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day9">Day 9: Smoke Basin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day10">Day 10: Syntax Scoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day11">Day 11: Dumbo Octopus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day12">Day 12: Passage Pathing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day13">Day 13: Transparent Origami</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day14">Day 14: Extended Polymerization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day15">Day 15: Chiton</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day16">Day 16: Packet Decoder</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day17">Day 17: Trick Shot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day18">Day 18: Snailfish</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day19">Day 19: Beacon Scanner</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day20">Day 20: Trench Map</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day21">Day 21: Dirac Dice</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/scala-advent-of-code/puzzles/day22">Day 22: Reactor Reboot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day23">Day 23: Amphipod</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day24">Day 24: Arithmetic Logic Unit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scala-advent-of-code/puzzles/day25">Day 25: Sea Cucumber</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Day 22: Reactor Reboot</h1></header><p>by <a href="https://twitter.com/bishabosha" target="_blank" rel="noopener noreferrer">@bishabosha</a></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="puzzle-description">Puzzle description<a aria-hidden="true" class="hash-link" href="#puzzle-description" title="Direct link to heading">​</a></h2><p><a href="https://adventofcode.com/2021/day/22" target="_blank" rel="noopener noreferrer">https://adventofcode.com/2021/day/22</a></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="final-problem">Final Problem<a aria-hidden="true" class="hash-link" href="#final-problem" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="modelling-the-domain">Modelling The Domain<a aria-hidden="true" class="hash-link" href="#modelling-the-domain" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_31ik" id="basic-data-types">Basic Data Types<a aria-hidden="true" class="hash-link" href="#basic-data-types" title="Direct link to heading">​</a></h4><p>We model the input as a series of steps, where each step has a
command (either <code>&quot;on&quot;</code> or <code>&quot;off&quot;</code>), and
a cuboid area. Each cuboid is modelled by its dimensions
in each of the x, y, and z dimensions.
A dimension is modelled by two numbers - its start and end points,
i.e. the minimum and maximum values on a single line in that
dimension. Here are the data types modelling the above:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">case class Dimension(min: Int, max: Int):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  require(min &lt;= max)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case class Cuboid(xs: Dimension, ys: Dimension, zs: Dimension)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum Command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case On, Off</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case class Step(command: Command, cuboid: Cuboid)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="syntax-sugar-for-dimensions">Syntax Sugar for Dimensions<a aria-hidden="true" class="hash-link" href="#syntax-sugar-for-dimensions" title="Direct link to heading">​</a></h4><p>To make construction of dimensions easier to read, we define an extension method so that we may write e.g. <code>n by m</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">extension (x1: Int)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  infix def by (x2: Int): Dimension = Dimension(x1, x2)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><code>infix</code> is a keyword in Scala that allows us to define a method
that can be called infix.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_31ik" id="does-a-dimension-fit-in-some-boundary-issubset">Does a Dimension Fit in Some Boundary? (<code>isSubset</code>)<a aria-hidden="true" class="hash-link" href="#does-a-dimension-fit-in-some-boundary-issubset" title="Direct link to heading">​</a></h4><p>We can test if some dimension fits within another
by checking that their minimum and maximum values conform
to each other. We can model this for <code>Dimension</code> with a
member method <code>isSubset</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def isSubset(d: Dimension): Boolean =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    min &gt;= d.min &amp;&amp; max &lt;= d.max</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="does-one-dimension-intersect-with-another">Does one Dimension <code>intersect</code> with Another?<a aria-hidden="true" class="hash-link" href="#does-one-dimension-intersect-with-another" title="Direct link to heading">​</a></h4><p>Lets also add another method to <code>Dimension</code> to get the
part that intersects with another dimension, if it exists:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  infix def insersect(d: Dimension): Option[Dimension] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Option.when(max &gt;= d.min &amp;&amp; min &lt;= d.max) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (min max d.min) by (max min d.max)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>You can think of intersecting dimensions as getting the part of
two lines that overlap.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_31ik" id="what-size-is-a-dimension">What <code>size</code> is a Dimension?<a aria-hidden="true" class="hash-link" href="#what-size-is-a-dimension" title="Direct link to heading">​</a></h4><p>Lastly we add another method to <code>Dimension</code> to get its size:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def size: Int = max - min + 1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="does-one-cuboid-intersect-with-another">Does one Cuboid <code>intersect</code> with Another?<a aria-hidden="true" class="hash-link" href="#does-one-cuboid-intersect-with-another" title="Direct link to heading">​</a></h4><p>Now that we know how to get the intersection of two
dimensions, we can extend this to the intersection of two
cuboids, by asserting that there is an intersection in
each dimension. Here we add a method to <code>Cuboid</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  infix def intersect(curr: Cuboid): Option[Cuboid] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      xs &lt;- this.xs insersect curr.xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ys &lt;- this.ys insersect curr.ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      zs &lt;- this.zs insersect curr.zs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yield</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Cuboid(xs, ys, zs)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="what-is-the-volume-of-a-cuboid">What is the <code>volume</code> of a Cuboid?<a aria-hidden="true" class="hash-link" href="#what-is-the-volume-of-a-cuboid" title="Direct link to heading">​</a></h4><p>With the <code>size</code> of each dimension determined, we can add a method
to <code>Cuboid</code> to determine its <code>volume</code>, it is computed as a
<code>BigInt</code> to avoid numeric overflow:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  def volume: BigInt = BigInt(1) * xs.size * ys.size * zs.size</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="solving-the-problem">Solving the Problem<a aria-hidden="true" class="hash-link" href="#solving-the-problem" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_31ik" id="method-summary">Method Summary<a aria-hidden="true" class="hash-link" href="#method-summary" title="Direct link to heading">​</a></h4><p>The problem asks us to determine how many cubes are lit after
all steps have been completed. We do this by modelling
the current lit cubes as a set of cuboids. Each step may
add or remove cuboids from this set. Aggregating cubes as cuboids
means that we have the potential to save a lot of memory,
as we only need 6 integer values to store all cubes within a
specific set of coordinates.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Note that with sufficient churn, i.e. steps that cause already
lit areas to be turned off, many cuboids will be required, enough that
a more dense representation could be desirable to save memory.
For my input, &lt; 3500 cuboids exist after the final step.</p></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="removing-cubes-that-are-turned-off">Removing Cubes that are Turned Off<a aria-hidden="true" class="hash-link" href="#removing-cubes-that-are-turned-off" title="Direct link to heading">​</a></h4><p>The tricky part is when one step turns off some cubes that are
already lit, as this will leave a hole in at least one of cuboids
in the set.</p><p>To simplify things, let&#x27;s imagine that after the first
step, a square of cubes is in our set.
Then in the next step, an area is turned off in the
middle of that square.
We can update our set of lit cuboids by removing the square,
and replacing it by four new cuboids, created by splitting
the square where it intersects with the hole. Here we
can see the set of lit cuboids for the first two steps:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  ┏━━━━━━━┓   ┏━┳━━━┳━┓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ┃       ┃   ┃ ┣━━━┫ ┃</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.┃       ┃ 2.┃ ┃   ┃ ┃</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ┃       ┃   ┃ ┣━━━┫ ┃</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ┗━━━━━━━┛   ┗━┻━━━┻━┛</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We provide a method <code>subdivide</code> which follows the model described
above:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">def subdivide(old: Cuboid, hole: Cuboid): Set[Cuboid] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var on = Set.empty[Cuboid]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if old.xs.min != hole.xs.min then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on += Cuboid(xs = old.xs.min by hole.xs.min - 1, ys = old.ys, zs = old.zs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if old.xs.max != hole.xs.max then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on += Cuboid(xs = hole.xs.max + 1 by old.xs.max, ys = old.ys, zs = old.zs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if old.ys.min != hole.ys.min then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on += Cuboid(xs = hole.xs, ys = old.ys.min by hole.ys.min - 1, zs = old.zs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if old.ys.max != hole.ys.max then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on += Cuboid(xs = hole.xs, ys = hole.ys.max + 1 by old.ys.max, zs = old.zs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if old.zs.min != hole.zs.min then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on += Cuboid(xs = hole.xs, ys = hole.ys, zs = old.zs.min by hole.zs.min - 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if old.zs.max != hole.zs.max then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on += Cuboid(xs = hole.xs, ys = hole.ys, zs = hole.zs.max + 1 by old.zs.max)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="running-the-steps">Running the Steps<a aria-hidden="true" class="hash-link" href="#running-the-steps" title="Direct link to heading">​</a></h4><p>We iterate through all the input steps once to accumulate
a set of cuboids, where each cuboid is a bounding box for
lit cubes.</p><p>On each step, we create a new set of cuboids by subtracting the
volume of the current cuboid from any cuboids created in the
previous step (using our <code>subdivide</code> method). We also include the
cuboid of the current step if the command is <code>&quot;on&quot;</code>.
See the code here:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">def run(steps: Iterator[Step]): Set[Cuboid] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def subtract(cuboid: Cuboid)(on: Set[Cuboid], previouslyOn: Cuboid): Set[Cuboid] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    previouslyOn intersect cuboid match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case Some(hole) =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        on | subdivide(previouslyOn, hole)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      case _ =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        on + previouslyOn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def turnOnCubes(on: Set[Cuboid], step: Step): Set[Cuboid] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val Step(command, cuboid) = step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val newOn = if command == On then Set(cuboid) else Set.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on.foldLeft(newOn)(subtract(cuboid))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  steps.foldLeft(Set.empty)(turnOnCubes)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="calculate-the-total-cubes-lit">Calculate the Total Cubes Lit<a aria-hidden="true" class="hash-link" href="#calculate-the-total-cubes-lit" title="Direct link to heading">​</a></h4><p>To calculate the total number of cubes lit from the set of
cuboids, we convert from a set to a sequence (to
allow duplicates) then take the sum of cuboid volumes:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">def summary(on: Set[Cuboid]): BigInt =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on.toList.map(_.volume).sum</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="parsing-the-input">Parsing The Input<a aria-hidden="true" class="hash-link" href="#parsing-the-input" title="Direct link to heading">​</a></h3><p>The input is made of a number of lines, typically like
the following:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">on x=-29..15,y=-4..46,z=-21..23</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We parse each line into our <code>Step</code> data type.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="parser-type"><code>Parser</code> Type<a aria-hidden="true" class="hash-link" href="#parser-type" title="Direct link to heading">​</a></h4><p>First define a type <code>Parser[A]</code> which we will
use as a pattern match extractor:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">type Parser[A] = PartialFunction[String, A]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="parsing-a-command">Parsing a <code>Command</code><a aria-hidden="true" class="hash-link" href="#parsing-a-command" title="Direct link to heading">​</a></h4><p>To make a <code>Step</code> we need both a <code>Command</code> and a
a <code>Cuboid</code>. We define a parser for <code>Command</code> as such:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val CommandOf: Parser[Command] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case &quot;on&quot; =&gt; On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case &quot;off&quot; =&gt; Off</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="parsing-a-cuboid">Parsing a <code>Cuboid</code><a aria-hidden="true" class="hash-link" href="#parsing-a-cuboid" title="Direct link to heading">​</a></h4><p>We parse a <code>Cuboid</code> from three <code>Dimension</code>, which we
parse as such:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val CuboidOf: Parser[Cuboid] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case s&quot;x=${DimensionOf(xs)},y=${DimensionOf(ys)},z=${DimensionOf(zs)}&quot; =&gt; Cuboid(xs, ys, zs)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val DimensionOf: Parser[Dimension] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case s&quot;${NumOf(begin)}..${NumOf(end)}&quot; =&gt; begin by end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val NumOf: Parser[Int] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case s if s.matches(raw&quot;-?\d+&quot;) =&gt; s.toInt</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="parsing-a-step">Parsing a <code>Step</code><a aria-hidden="true" class="hash-link" href="#parsing-a-step" title="Direct link to heading">​</a></h4><p>Finally we can parse a single <code>Step</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val StepOf: Parser[Step] =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case s&quot;${CommandOf(command)} ${CuboidOf(cuboid)}&quot; =&gt; Step(command, cuboid)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To parse all lines, we can use <code>linesIterator</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val steps = input.linesIterator.map(StepOf)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Note that the above call to <code>.map</code> will call
<code>StepOf.apply</code> for each line, this may throw a
<code>MatchError</code> if the line is formatted incorrectly.</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="solution-of-part-1">Solution of Part 1<a aria-hidden="true" class="hash-link" href="#solution-of-part-1" title="Direct link to heading">​</a></h3><p>For part one, we only run the steps that are in the
initialisation sequence, i.e. running all the first
steps while they fit within the
area <code>x=-50..50,y=-50..50,z=-50..50</code>.</p><p>We check that a cuboid is in the initialisation
sequence with the following:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">def isInit(cuboid: Cuboid): Boolean =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Seq(cuboid.xs, cuboid.ys, cuboid.zs).forall(_.isSubset(-50 by 50))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The final code for part 1 is then to run the steps
only while they fit the initialisation sequence, and then
summarise the set of cuboids:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">def part1(input: String): BigInt =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val steps = input.linesIterator.map(StepOf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  summary(run(steps.takeWhile(s =&gt; isInit(s.cuboid))))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="solution-of-part-2">Solution of Part 2<a aria-hidden="true" class="hash-link" href="#solution-of-part-2" title="Direct link to heading">​</a></h3><p>Part 2 is identical to part 1, except that we run all
steps, not just the initialisation sequence:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">def part2(input: String): BigInt =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  summary(run(input.linesIterator.map(StepOf)))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="run-it-in-the-browser">Run it in the browser<a aria-hidden="true" class="hash-link" href="#run-it-in-the-browser" title="Direct link to heading">​</a></h2><h4 class="anchor anchorWithStickyNavbar_31ik" id="part-1">Part 1<a aria-hidden="true" class="hash-link" href="#part-1" title="Direct link to heading">​</a></h4><div id="day22-part1"></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="part-2">Part 2<a aria-hidden="true" class="hash-link" href="#part-2" title="Direct link to heading">​</a></h4><div id="day22-part2"></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="run-it-locally">Run it locally<a aria-hidden="true" class="hash-link" href="#run-it-locally" title="Direct link to heading">​</a></h2><p>You can get this solution locally by cloning the <a href="https://github.com/scalacenter/scala-advent-of-code" target="_blank" rel="noopener noreferrer">scalacenter/scala-advent-of-code</a> repository.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ git clone https://github.com/scalacenter/scala-advent-of-code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cd scala-advent-of-code</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can run it with <a href="https://scala-cli.virtuslab.org/" target="_blank" rel="noopener noreferrer">scala-cli</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ scala-cli src -M day22.part1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The answer is: 647062</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ scala-cli src -M day22.part2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The answer is: 1319618626668022</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can replace the content of the <code>input/day22</code> file with your own input from <a href="https://adventofcode.com/2021/day/22" target="_blank" rel="noopener noreferrer">adventofcode.com</a> to get your own solution.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="solutions-from-the-community">Solutions from the community<a aria-hidden="true" class="hash-link" href="#solutions-from-the-community" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/FlorianCassayre/AdventOfCode-2021/blob/master/src/main/scala/adventofcode/solutions/Day22.scala" target="_blank" rel="noopener noreferrer">Solution</a> of <a href="https://github.com/FlorianCassayre" target="_blank" rel="noopener noreferrer">@FlorianCassayre</a>.</li></ul><p>Share your solution to the Scala community by editing this page.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/scalacenter/scala-advent-of-code/edit/website/docs/puzzles/day22.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/scala-advent-of-code/puzzles/day21"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Day 21: Dirac Dice</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/scala-advent-of-code/puzzles/day23"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Day 23: Amphipod<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#puzzle-description" class="table-of-contents__link toc-highlight">Puzzle description</a></li><li><a href="#final-problem" class="table-of-contents__link toc-highlight">Final Problem</a><ul><li><a href="#modelling-the-domain" class="table-of-contents__link toc-highlight">Modelling The Domain</a></li><li><a href="#solving-the-problem" class="table-of-contents__link toc-highlight">Solving the Problem</a></li><li><a href="#parsing-the-input" class="table-of-contents__link toc-highlight">Parsing The Input</a></li><li><a href="#solution-of-part-1" class="table-of-contents__link toc-highlight">Solution of Part 1</a></li><li><a href="#solution-of-part-2" class="table-of-contents__link toc-highlight">Solution of Part 2</a></li></ul></li><li><a href="#run-it-in-the-browser" class="table-of-contents__link toc-highlight">Run it in the browser</a></li><li><a href="#run-it-locally" class="table-of-contents__link toc-highlight">Run it locally</a></li><li><a href="#solutions-from-the-community" class="table-of-contents__link toc-highlight">Solutions from the community</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Content</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/scala-advent-of-code/introduction">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/scala-advent-of-code/setup">Setup</a></li><li class="footer__item"><a class="footer__link-item" href="/scala-advent-of-code/puzzles/day1">Puzzles</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/channels/632150470000902164/913451015246868530" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/scala_lang" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://scala.epfl.ch/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Scala Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/scalacenter" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Scala Center, Built with Docusaurus.</div></div></div></footer></div>
<script src="/scala-advent-of-code/assets/js/runtime~main.cff3ab2b.js"></script>
<script src="/scala-advent-of-code/assets/js/main.339c7521.js"></script>
</body>
</html>